{"openapi":"3.1.0","info":{"title":"Air & Insights Agent","description":"\n## üå§Ô∏è Air & Insights Copilot\n\nAn agentic assistant that fetches weather & air quality data and provides \nactionable guidance for outdoor activities.\n\n### Features\n- **Air Quality Analysis**: PM2.5, PM10, and temperature data with exercise safety guidance\n- **NASA APOD**: Astronomy Picture of the Day with AI-generated summaries\n- **Smart Caching**: 10-minute TTL to reduce API calls\n- **LLM Reasoning**: GitHub Models (GPT-4o-mini) for natural language guidance\n\n### Data Sources\n- [Open-Meteo](https://open-meteo.com/) - Weather & Air Quality (no API key required)\n- [NASA APOD](https://api.nasa.gov/) - Astronomy Picture of the Day\n\n### Attribution\n- Weather data by Open-Meteo.com\n- Image from NASA Astronomy Picture of the Day\n","contact":{"name":"Air & Insights Agent","url":"https://github.com/yourusername/air-insights-agent"},"license":{"name":"MIT"},"version":"1.0.0"},"paths":{"/api/v1/health":{"get":{"tags":["System"],"summary":"Health Check","description":"Service health check.","operationId":"health_check_api_v1_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/api/v1/status/llm":{"get":{"tags":["System"],"summary":"Llm Status","description":"Check LLM provider status.\n\nReturns which LLM providers are available:\n- GitHub Models (primary)\n- Ollama (fallback)","operationId":"llm_status_api_v1_status_llm_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/status/rate-limits":{"get":{"tags":["System"],"summary":"Rate Limits Status","description":"Check rate limit status for all LLM providers.\n\nReturns:\n- GitHub Models: Limited to ~150 requests/day (free tier)\n- Ollama: Unlimited (local)\n\nUseful for monitoring API usage and planning fallback strategies.","operationId":"rate_limits_status_api_v1_status_rate_limits_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/analyze":{"post":{"tags":["Air Quality"],"summary":"Analyze air quality for outdoor exercise","description":"**Use this tool when the user asks about:**\n- Air quality, PM2.5, PM10, pollution levels\n- Is it safe to run/exercise/jog outside?\n- Should I go for a walk/bike ride?\n- Outdoor activity safety recommendations\n\n**What it does:**\nFetches real-time air quality data (PM2.5, PM10) and temperature for the specified \nlocation and time period, then provides actionable guidance about whether outdoor \nexercise is safe.\n\n**Input:** Latitude, longitude, and forecast hours (1-384, up to 16 days)\n**Output:** Air quality metrics with safety level and LLM-generated exercise guidance","operationId":"analyze_air_quality_api_v1_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalyzeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalyzeResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/apod/today":{"get":{"tags":["NASA APOD"],"summary":"Get NASA Astronomy Picture of the Day","description":"**Use this tool when the user asks about:**\n- NASA picture, astronomy picture, APOD\n- Space photo, today's space image\n- What's the astronomy picture today?\n- Show me something cool from NASA\n\n**What it does:**\nFetches NASA's Astronomy Picture of the Day including the image URL, title, \nexplanation, and an AI-generated summary suitable for conversation.\n\n**Input:** None required\n**Output:** APOD image URL, title, explanation, and AI summary","operationId":"get_apod_today_api_v1_apod_today_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APODResponse"}}}}}}},"/api/v1/chat":{"post":{"tags":["Chat"],"summary":"Natural language chat for weather, air quality, and NASA APOD","description":"**Use this tool for any natural language conversation about:**\n- Weather forecasts (current, today, tomorrow, next week, next 16 days)\n- Historical weather (yesterday, last week, past 3 months - up to 92 days)\n- Air quality and outdoor exercise safety\n- NASA Astronomy Picture of the Day\n- Location-aware queries (cities, countries, coordinates)\n\n**What it does:**\nAccepts natural language queries and intelligently routes them to the appropriate \ndata source. Supports conversation context for follow-up questions like \n\"what about tomorrow?\" or \"how about Paris?\".\n\n**Input:** Natural language message (e.g., \"Is it safe to run in Sofia today?\")\n**Output:** Formatted response with data and AI-generated guidance\n\n**Examples:**\n- \"What's the weather in London for the next 3 days?\"\n- \"Is it safe to exercise outside in Tokyo?\"\n- \"Show me the NASA astronomy picture\"\n- \"How was the air quality yesterday in Berlin?\"","operationId":"chat_api_v1_chat_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cache/stats":{"get":{"tags":["System"],"summary":"Get Cache Stats","description":"Get cache statistics.","operationId":"get_cache_stats_api_v1_cache_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Cache Stats Api V1 Cache Stats Get"}}}}}}},"/health":{"get":{"tags":["System"],"summary":"Health Check","description":"Service health check.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/status/llm":{"get":{"tags":["System"],"summary":"Llm Status","description":"Check LLM provider status.\n\nReturns which LLM providers are available:\n- GitHub Models (primary)\n- Ollama (fallback)","operationId":"llm_status_status_llm_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/status/rate-limits":{"get":{"tags":["System"],"summary":"Rate Limits Status","description":"Check rate limit status for all LLM providers.\n\nReturns:\n- GitHub Models: Limited to ~150 requests/day (free tier)\n- Ollama: Unlimited (local)\n\nUseful for monitoring API usage and planning fallback strategies.","operationId":"rate_limits_status_status_rate_limits_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/analyze":{"post":{"tags":["Air Quality"],"summary":"Analyze air quality for outdoor exercise","description":"**Use this tool when the user asks about:**\n- Air quality, PM2.5, PM10, pollution levels\n- Is it safe to run/exercise/jog outside?\n- Should I go for a walk/bike ride?\n- Outdoor activity safety recommendations\n\n**What it does:**\nFetches real-time air quality data (PM2.5, PM10) and temperature for the specified \nlocation and time period, then provides actionable guidance about whether outdoor \nexercise is safe.\n\n**Input:** Latitude, longitude, and forecast hours (1-384, up to 16 days)\n**Output:** Air quality metrics with safety level and LLM-generated exercise guidance","operationId":"analyze_air_quality_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalyzeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalyzeResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/apod/today":{"get":{"tags":["NASA APOD"],"summary":"Get NASA Astronomy Picture of the Day","description":"**Use this tool when the user asks about:**\n- NASA picture, astronomy picture, APOD\n- Space photo, today's space image\n- What's the astronomy picture today?\n- Show me something cool from NASA\n\n**What it does:**\nFetches NASA's Astronomy Picture of the Day including the image URL, title, \nexplanation, and an AI-generated summary suitable for conversation.\n\n**Input:** None required\n**Output:** APOD image URL, title, explanation, and AI summary","operationId":"get_apod_today_apod_today_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APODResponse"}}}}}}},"/chat":{"post":{"tags":["Chat"],"summary":"Natural language chat for weather, air quality, and NASA APOD","description":"**Use this tool for any natural language conversation about:**\n- Weather forecasts (current, today, tomorrow, next week, next 16 days)\n- Historical weather (yesterday, last week, past 3 months - up to 92 days)\n- Air quality and outdoor exercise safety\n- NASA Astronomy Picture of the Day\n- Location-aware queries (cities, countries, coordinates)\n\n**What it does:**\nAccepts natural language queries and intelligently routes them to the appropriate \ndata source. Supports conversation context for follow-up questions like \n\"what about tomorrow?\" or \"how about Paris?\".\n\n**Input:** Natural language message (e.g., \"Is it safe to run in Sofia today?\")\n**Output:** Formatted response with data and AI-generated guidance\n\n**Examples:**\n- \"What's the weather in London for the next 3 days?\"\n- \"Is it safe to exercise outside in Tokyo?\"\n- \"Show me the NASA astronomy picture\"\n- \"How was the air quality yesterday in Berlin?\"","operationId":"chat_chat_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cache/stats":{"get":{"tags":["System"],"summary":"Get Cache Stats","description":"Get cache statistics.","operationId":"get_cache_stats_cache_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Cache Stats Cache Stats Get"}}}}}}}},"components":{"schemas":{"APODResponse":{"properties":{"title":{"type":"string","title":"Title","description":"Title of the Astronomy Picture of the Day","examples":["The Orion Nebula in Infrared"]},"url":{"type":"string","title":"Url","description":"URL to the image or video","examples":["https://apod.nasa.gov/apod/image/2412/orion_nebula.jpg"]},"explanation":{"type":"string","title":"Explanation","description":"Original NASA explanation of the image"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary","description":"LLM-generated 2-line summary"},"date":{"type":"string","title":"Date","description":"Date of the APOD (YYYY-MM-DD format)","examples":["2024-12-20"]},"media_type":{"type":"string","title":"Media Type","description":"Type of media (image or video)","default":"image"},"hdurl":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hdurl","description":"URL to high-resolution image (if available)"},"attribution":{"type":"string","title":"Attribution","description":"NASA attribution","default":"Image from NASA Astronomy Picture of the Day"}},"type":"object","required":["title","url","explanation","date"],"title":"APODResponse","description":"Response model for /apod/today endpoint.","examples":[{"attribution":"Image from NASA Astronomy Picture of the Day","date":"2024-12-20","explanation":"The Great Nebula in Orion...","hdurl":"https://apod.nasa.gov/apod/image/2412/orion_nebula_hd.jpg","media_type":"image","summary":"A stunning infrared view of the Orion Nebula reveals hidden stars and dust structures. This image showcases the birthplace of new stars 1,344 light-years away.","title":"The Orion Nebula in Infrared","url":"https://apod.nasa.gov/apod/image/2412/orion_nebula.jpg"}]},"AnalyzeRequest":{"properties":{"latitude":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Latitude","description":"Latitude coordinate (-90 to 90)","examples":[42.6977]},"longitude":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Longitude","description":"Longitude coordinate (-180 to 180)","examples":[23.3219]},"hours":{"type":"integer","maximum":384.0,"minimum":1.0,"title":"Hours","description":"Number of hours to forecast (1-384, up to 16 days)","default":6,"examples":[6]}},"type":"object","required":["latitude","longitude"],"title":"AnalyzeRequest","description":"Request model for /analyze endpoint.","examples":[{"hours":6,"latitude":42.6977,"longitude":23.3219}]},"AnalyzeResponse":{"properties":{"pm25_avg":{"type":"number","title":"Pm25 Avg","description":"Average PM2.5 concentration in ¬µg/m¬≥","examples":[15.5]},"pm10_avg":{"type":"number","title":"Pm10 Avg","description":"Average PM10 concentration in ¬µg/m¬≥","examples":[28.3]},"temp_avg":{"type":"number","title":"Temp Avg","description":"Average temperature in ¬∞C","examples":[18.2]},"guidance_text":{"type":"string","title":"Guidance Text","description":"LLM-generated actionable guidance for outdoor exercise","examples":["‚úÖ Great conditions for outdoor exercise! PM2.5 (15.5 ¬µg/m¬≥) and PM10 (28.3 ¬µg/m¬≥) are within safe limits. Temperature at 18.2¬∞C is optimal. Enjoy your run!"]},"safety_level":{"$ref":"#/components/schemas/SafetyLevel","description":"Overall safety level for outdoor exercise","default":"UNKNOWN"},"data_quality":{"$ref":"#/components/schemas/DataQuality","description":"Quality assessment of the underlying data","default":"HIGH"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location","description":"Human-readable location description"},"forecast_hours":{"type":"integer","title":"Forecast Hours","description":"Number of hours included in forecast"},"attribution":{"type":"string","title":"Attribution","description":"Data source attribution (required)","default":"Weather data by Open-Meteo.com"},"cached":{"type":"boolean","title":"Cached","description":"Whether response was served from cache","default":false},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Response generation timestamp (UTC)"}},"type":"object","required":["pm25_avg","pm10_avg","temp_avg","guidance_text","forecast_hours"],"title":"AnalyzeResponse","description":"Response model for /analyze endpoint.","examples":[{"attribution":"Weather data by Open-Meteo.com","cached":false,"data_quality":"HIGH","forecast_hours":6,"guidance_text":"‚úÖ Great conditions for outdoor exercise! PM2.5 (15.5 ¬µg/m¬≥) and PM10 (28.3 ¬µg/m¬≥) are within safe limits. Temperature at 18.2¬∞C is optimal. Enjoy your run!","location":"Sofia, Bulgaria","pm10_avg":28.3,"pm25_avg":15.5,"safety_level":"SAFE","temp_avg":18.2,"timestamp":"2024-12-20T10:30:00Z"}]},"ChatRequest":{"properties":{"message":{"type":"string","maxLength":1000,"minLength":1,"title":"Message","description":"User's natural language query","examples":["What's the air quality in Sofia for the next 6 hours?"]}},"type":"object","required":["message"],"title":"ChatRequest","description":"Request model for /chat endpoint."},"ChatResponse":{"properties":{"response":{"type":"string","title":"Response","description":"Assistant's response"},"intent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Intent","description":"Detected user intent (analyze, apod, help, unknown)"},"data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Data","description":"Structured data from the query (if any)"}},"type":"object","required":["response"],"title":"ChatResponse","description":"Response model for /chat endpoint."},"DataQuality":{"type":"string","enum":["HIGH","MEDIUM","LOW","INSUFFICIENT"],"title":"DataQuality","description":"Data quality assessment."},"ErrorResponse":{"properties":{"error":{"type":"string","title":"Error","description":"Error type/code"},"message":{"type":"string","title":"Message","description":"Human-readable error message"},"details":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Details","description":"Additional error details"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Error timestamp"}},"type":"object","required":["error","message"],"title":"ErrorResponse","description":"Standard error response model.","examples":[{"details":{"field":"latitude","value":100},"error":"VALIDATION_ERROR","message":"Latitude must be between -90 and 90","timestamp":"2024-12-20T10:30:00Z"}]},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Service health status","default":"healthy"},"version":{"type":"string","title":"Version","description":"API version","default":"1.0.0"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Health check timestamp"}},"type":"object","title":"HealthResponse","description":"Response model for /health endpoint."},"SafetyLevel":{"type":"string","enum":["SAFE","MODERATE","UNHEALTHY_SENSITIVE","UNHEALTHY","VERY_UNHEALTHY","HAZARDOUS","UNKNOWN"],"title":"SafetyLevel","description":"Air quality safety levels for exercise."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}